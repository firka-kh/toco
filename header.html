<style>
    /* Custom gradient background for header and hero sections */
    .gradient-bg {
        background-color: #1f2937; /* Dark gray - more elegant */
    }
    
    /* Animated Menu Styles */
    :root {
        --bgColorMenu: rgba(255, 255, 255, 0.05); /* Slightly more transparent */
        --duration: 0.7s;
        --activeColor: #eab308; /* Golden-yellow accent for active items */
    }
    
    .animated-menu {
        margin: 0;
        display: flex;
        padding: 0.5em 1em;
        position: relative;
        align-items: center;
        justify-content: center;
        background-color: var(--bgColorMenu);
        border-radius: 2em;
        backdrop-filter: blur(10px);
        border: 1px solid rgba(255, 255, 255, 0.1); /* Lighter border */
    }
    
    .menu__item {
        all: unset;
        flex-grow: 1;
        z-index: 100;
        display: flex;
        cursor: pointer;
        position: relative;
        border-radius: 50%;
        align-items: center;
        will-change: transform;
        justify-content: center;
        padding: 0.5em; /* Increased padding */
        margin: 0 0.2em;
        transition: transform var(--duration);
        color: white;
        text-decoration: none;
        font-size: 1em; /* Slightly larger base font size */
        min-width: 3.2em;
        height: 3.2em;
    }
    
    .menu__item::before {
        content: "";
        z-index: -1;
        width: 3.2em;
        height: 3.2em;
        border-radius: 50%;
        position: absolute;
        transform: scale(0);
        transition: background-color var(--duration), transform var(--duration);
    }
    
    .menu__item.active {
        transform: translate3d(0, -0.6em, 0);
    }
    
    .menu__item.active::before {
        transform: scale(1);
        background-color: var(--activeColor); /* Use single active color */
    }

    /* Dropdown styles */
    .dropdown {
        position: relative;
        display: flex;
        align-items: center;
        justify-content: center;
    }

    .dropdown-content {
        position: absolute;
        top: 120%; /* Position below the parent item */
        left: 50%;
        transform: translate(-50%, 10px); /* Initial position for animation */
        
        /* Matching menu style */
        background-color: var(--bgColorMenu);
        backdrop-filter: blur(10px);
        border: 1px solid rgba(255, 255, 255, 0.1);

        min-width: 180px;
        box-shadow: 0px 10px 25px rgba(0,0,0,0.3);
        z-index: 101;
        border-radius: 1em;
        padding: 0.8em 0;
        
        opacity: 0;
        visibility: hidden;
        pointer-events: none;
        
        /* Animation with a "bounce" effect */
        transition: opacity 0.4s ease, transform 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275), visibility 0.4s;
    }

    /* The "drop" connector */
    .dropdown-content::before {
        content: '';
        position: absolute;
        top: -10px; /* Position it above the dropdown box */
        left: 50%;
        transform: translateX(-50%);
        width: 20px;
        height: 10px;
        /* Creates a teardrop shape pointing upwards */
        clip-path: polygon(50% 0%, 0% 100%, 100% 100%);
        background-color: var(--bgColorMenu);
        /* To make it seamless, we can try to add a border too, but background is often enough */
    }

    .dropdown-content a {
        color: white;
        padding: 12px 20px;
        text-decoration: none;
        display: block;
        text-align: left;
        font-size: 0.95em;
        transition: background-color 0.3s, padding-left 0.3s;
    }

    .dropdown-content a:hover {
        background-color: rgba(255, 255, 255, 0.1);
        padding-left: 25px; /* Indent on hover for feedback */
    }

    .dropdown:hover .dropdown-content {
        opacity: 1;
        visibility: visible;
        pointer-events: auto;
        transform: translate(-50%, 0); /* Final position */
    }
    
    .menu__item:hover:not(.active) {
        transform: translate3d(0, -0.2em, 0);
    }
    
    .menu__item:hover:not(.active)::before {
        transform: scale(0.8);
        background-color: rgba(255, 255, 255, 0.1);
    }
    
    .icon {
        width: 1.4em; /* Larger icon */
        height: 1.4em; /* Larger icon */
        stroke: white;
        fill: transparent;
        stroke-width: 2pt;
        stroke-miterlimit: 10;
        stroke-linecap: round;
        stroke-linejoin: round;
        stroke-dasharray: 400;
    }
    
    .menu__item.active .icon {
        animation: strok 1.5s reverse;
    }
    
    @keyframes strok {
        100% {
            stroke-dashoffset: 400;
        }
    }
    
    .menu__border {
        left: 0;
        bottom: 99%;
        width: 6.4em; /* Adjusted for new item size */
        height: 2em;
        position: absolute;
        clip-path: url(#menu);
        will-change: transform;
        background-color: var(--bgColorMenu);
        transition: transform var(--duration);
    }
    
    .svg-container {
        width: 0;
        height: 0;
    }
    
    .menu__text {
        display: none;
        margin-left: 0.5em;
        font-size: 0.9em; /* Adjusted font size */
        white-space: nowrap;
    }
    
    @media screen and (min-width: 1024px) {
        .menu__item {
            min-width: auto;
            padding: 0.5em 1em; /* Adjusted padding */
        }
        
        .menu__text {
            display: inline;
        }
        
        .menu__item::before {
            width: 100%;
            height: 3.2em;
            border-radius: 1.6em;
        }
    }
    
    @media screen and (max-width: 768px) {
        .animated-menu {
            font-size: 0.8em;
            padding: 0.3em 0.5em;
        }
        
        .menu__item {
            min-width: 2.8em;
            height: 2.8em;
            margin: 0 0.1em;
        }
        
        .menu__item::before {
            width: 2.8em;
            height: 2.8em;
        }
    }
</style>

<header class="gradient-bg text-white shadow-lg">
    <div class="container mx-auto px-4 py-4">
        <div class="flex flex-col md:flex-row md:items-center md:justify-between">
            <div class="flex items-center space-x-4 mb-4 md:mb-0">
                <div class="w-12 h-12 bg-gradient-to-br from-yellow-400 to-orange-500 rounded-full flex items-center justify-center shadow-lg">
                    <i class="fas fa-briefcase text-white text-xl"></i>
                </div>
                <div>
                    <a href="index.html" class="hover:underline focus:outline-none">
                        <h1 class="text-2xl font-bold inline">Портал рынка труда</h1>
                        <span class="text-sm opacity-90 block">Республика Таджикистан</span>
                    </a>
                </div>
            </div>
            
            <nav class="animated-menu">
                <a href="index.html" class="menu__item active" data-page="index">
                    <svg class="icon" viewBox="0 0 24 24">
                        <path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"/>
                        <polyline points="9,22 9,12 15,12 15,22"/>
                    </svg>
                    <span class="menu__text">Главная</span>
                </a>
                
                <a href="news.html" class="menu__item" data-page="news">
                    <svg class="icon" viewBox="0 0 24 24">
                        <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/>
                        <polyline points="14,2 14,8 20,8"/>
                        <line x1="16" y1="13" x2="8" y2="13"/>
                        <line x1="16" y1="17" x2="8" y2="17"/>
                        <polyline points="10,9 9,9 8,9"/>
                    </svg>
                    <span class="menu__text">Новости</span>
                </a>
                
                <a href="serchwork.html" class="menu__item" data-page="serchwork">
                    <svg class="icon" viewBox="0 0 24 24">
                        <circle cx="11" cy="11" r="8"/>
                        <path d="M21 21l-4.35-4.35"/>
                    </svg>
                    <span class="menu__text">Поиск работы</span>
                </a>
                
                <a href="analitic_pg.html" class="menu__item" data-page="analitic_pg">
                    <svg class="icon" viewBox="0 0 24 24">
                        <line x1="18" y1="20" x2="18" y2="10"/>
                        <line x1="12" y1="20" x2="12" y2="4"/>
                        <line x1="6" y1="20" x2="6" y2="14"/>
                    </svg>
                    <span class="menu__text">Аналитика</span>
                </a>
                
                <div class="dropdown">
                    <a href="#" class="menu__item" data-page="profile" onclick="event.preventDefault();">
                        <svg class="icon" viewBox="0 0 24 24">
                            <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"/>
                            <circle cx="12" cy="7" r="4"/>
                        </svg>
                        <span class="menu__text">Профиль</span>
                    </a>
                    <div class="dropdown-content">
                        <a href="employer_profile.html">Работодатель</a>
                        <a href="user_dashboard.html">Соискатель</a>
                        <a href="register.html">Регистрация</a>
                    </div>
                </div>
                
                <a href="about.html" class="menu__item" data-page="about">
                    <svg class="icon" viewBox="0 0 24 24">
                        <circle cx="12" cy="12" r="10"/>
                        <path d="M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3"/>
                        <path d="M12 17h.01"/>
                    </svg>
                    <span class="menu__text">О портале</span>
                </a>
                
                <div class="menu__border"></div>
            </nav>
        </div>
    </div>
</header>

<div class="svg-container">
    <svg viewBox="0 0 202.9 45.5">
        <clipPath id="menu" clipPathUnits="objectBoundingBox" transform="scale(0.0049285362247413 0.021978021978022)">
            <path d="M6.7,45.5c5.7,0.1,14.1-0.4,23.3-4c5.7-2.3,9.9-5,18.1-10.5c10.7-7.1,11.8-9.2,20.6-14.3c5-2.9,9.2-5.2,15.2-7
              c7.1-2.1,13.3-2.3,17.6-2.1c4.2-0.2,10.5,0.1,17.6,2.1c6.1,1.8,10.2,4.1,15.2,7c8.8,5,9.9,7.1,20.6,14.3c8.3,5.5,12.4,8.2,18.1,10.5
              c9.2,3.6,17.6,4.2,23.3,4H6.7z"/>
        </clipPath>
    </svg>
</div>

<script>
$(document).ready(function() {
    "use strict";
    
    const menu = document.querySelector(".animated-menu");
    const menuItems = menu.querySelectorAll(".menu__item");
    const menuBorder = menu.querySelector(".menu__border");
    let activeItem = menu.querySelector(".active");
    
    // Определяем текущую страницу
    var currentPage = window.location.pathname.split('/').pop();
    if (currentPage === '' || currentPage === '/') {
        currentPage = 'index.html';
    }
    
    // Устанавливаем активный пункт меню
    menuItems.forEach(item => {
        const href = item.getAttribute('href');
        const page = item.getAttribute('data-page');
        const parentDropdown = item.closest('.dropdown');

        if (href === currentPage || 
            (currentPage === 'index.html' && page === 'index') ||
            (href.includes('#') && currentPage === 'index.html')) {
            
            // Убираем active со всех элементов
            menuItems.forEach(el => el.classList.remove('active'));
            
            // Добавляем active к текущему
            item.classList.add('active');
            activeItem = item;
        } else if (parentDropdown) {
            // Check if any link inside the dropdown is active
            const dropdownLinks = parentDropdown.querySelectorAll('.dropdown-content a');
            let isDropdownActive = false;
            dropdownLinks.forEach(link => {
                if (link.getAttribute('href') === currentPage) {
                    isDropdownActive = true;
                }
            });

            if (isDropdownActive) {
                // Убираем active со всех элементов
                menuItems.forEach(el => el.classList.remove('active'));
                
                // Добавляем active к текущему
                item.classList.add('active');
                activeItem = item;
            }
        }
    });
    
    function clickItem(item, index) {
        // For dropdown, don't change active state on click, just navigate
        if (item.closest('.dropdown')) {
            return;
        }

        menu.style.removeProperty("--timeOut");
        
        if (activeItem == item) return;
        
        if (activeItem) {
            activeItem.classList.remove("active");
        }
        
        item.classList.add("active");
        activeItem = item;
        offsetMenuBorder(activeItem, menuBorder);
    }
    
    function offsetMenuBorder(element, menuBorder) {
        if (!element || !menuBorder) return;
        
        const offsetActiveItem = element.getBoundingClientRect();
        const menuRect = menu.getBoundingClientRect();
        const left = Math.floor(offsetActiveItem.left - menuRect.left - (menuBorder.offsetWidth - offsetActiveItem.width) / 2) + "px";
        menuBorder.style.transform = `translate3d(${left}, 0, 0)`;
    }
    
    // Инициализация позиции border
    if (activeItem && menuBorder) {
        offsetMenuBorder(activeItem, menuBorder);
    }
    
    // Добавляем обработчики событий
    menuItems.forEach((item, index) => {
        item.addEventListener("click", (e) => {
            clickItem(item, index);
        });
    });
    
    // Обработка изменения размера окна
    window.addEventListener("resize", () => {
        if (activeItem && menuBorder) {
            offsetMenuBorder(activeItem, menuBorder);
            menu.style.setProperty("--timeOut", "none");
        }
    });
});
</script>
